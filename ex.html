<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Finance Summary</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg-color: #f4f4f4;
      --card-bg: #ffffff;
      --text-main: #2c3e50;
      --expense: #e74c3c;
      --income: #2980b9;
      --net: #27ae60;
    }

    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: var(--bg-color);
      margin: 0;
      padding: 16px;
    }

    h1 {
      text-align: center;
      color: var(--text-main);
      margin-bottom: 24px;
      font-size: clamp(1.5rem, 2.5vw, 2rem);
    }

    .category {
      background: var(--card-bg);
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      padding: 16px;
      margin-bottom: 20px;
    }

    .category h2 {
      font-size: 1.1rem;
      color: var(--text-main);
      margin-bottom: 8px;
    }

    .item-list {
      margin-left: 8px;
    }

    .item {
      font-size: 0.95rem;
      margin: 3px 0;
    }

    .item[style] {
      font-style: italic;
      color: #999;
    }

    .total {
      font-size: 1.05rem;
      padding: 10px;
      margin-top: 16px;
      border-radius: 6px;
      background: var(--card-bg);
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .expense { color: var(--expense); }
    .income { color: var(--income); }
    .net { color: var(--net); font-weight: bold; }

    /* Responsive layout */
    @media (max-width: 600px) {
      .category, .total {
        padding: 12px;
      }

      .item, .category h2 {
        font-size: 0.95rem;
      }
    }
  </style>
</head>
<body>

  <h1>Finance Summary</h1>
  <div id="summary"></div>

  <script>
    const jsonUrl = "https://raw.githubusercontent.com/your-username/your-repo/main/finance_data.json"; // Replace with your actual JSON raw URL

    const expectedCategories = ["Necessity", "Wants", "Travel", "Savings", "SalaryReceived"];

    fetch(jsonUrl)
      .then(response => response.json())
      .then(data => {
        const summaryDiv = document.getElementById("summary");
        let totalIncome = 0;
        let totalExpenses = 0;

        // Ensure all categories are present
        expectedCategories.forEach(category => {
          if (!data[category]) data[category] = [];
        });

        expectedCategories.forEach(category => {
          const entries = data[category];
          const validItems = entries.filter(item => item.amount && item.amount > 0);
          const categoryTotal = validItems.reduce((sum, item) => sum + item.amount, 0);

          const itemHTML = validItems.length > 0
            ? validItems.map(item => `<div class="item">${item.item}: ₹${item.amount.toLocaleString()}</div>`).join("")
            : `<div class="item" style="color:#aaa;">No expenses</div>`;

          summaryDiv.innerHTML += `
            <div class="category">
              <h2>${category}</h2>
              <div class="item-list">${itemHTML}</div>
              <p><strong>${category} Total:</strong> ₹${categoryTotal.toLocaleString()}</p>
            </div>
          `;

          if (category === "SalaryReceived") {
            totalIncome += categoryTotal;
          } else {
            totalExpenses += categoryTotal;
          }
        });

        summaryDiv.innerHTML += `
          <div class="total expense">Total Expenses: ₹${totalExpenses.toLocaleString()}</div>
          <div class="total income">Total Income: ₹${totalIncome.toLocaleString()}</div>
          <div class="total net">Net Balance: ₹${(totalIncome - totalExpenses).toLocaleString()}</div>
        `;
      })
      .catch(error => {
        console.error("Error fetching JSON:", error);
        document.getElementById("summary").innerHTML =
          `<p style="color:red;">Error loading data. Please check the URL or JSON format.</p>`;
      });
  </script>

</body>
</html>
